<!DOCTYPE html>
<meta charset="utf-8"><title>XRBC ping</title>
<pre id="out">{"status":"initializing"}</pre>
<script>
(async function () {
  const out = document.getElementById("out");
  const now = () => new Date().toISOString();
  const PROXY = "https://xrbitcoincash-github-io.onrender.com";

  const write = obj => out.textContent = JSON.stringify(obj, null, 2);
  try {
    const r = await fetch(PROXY, { method:"POST", headers:{ "Content-Type":"application/json" }, body: JSON.stringify({method:"server_state", params:[]}) });
    if (!r.ok) throw new Error("proxy HTTP " + r.status);
    const j = await r.json();
    const s = j?.result?.state || {};
    write({
      ok: true,
      server_state: s.server_state ?? null,
      peers: s.peers ?? null,
      updated_at: now()
    });
  } catch (e) {
    write({ ok:false, error:String(e.message||e), updated_at: now() });
  }
})();
</script>
