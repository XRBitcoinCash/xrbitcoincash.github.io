<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>XRBitcoinCash · Proxy Wallet Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Favicon -->
  <link rel="icon" href="/xrbc-nft.png" type="image/png">
  <link rel="shortcut icon" href="/xrbc-nft.png" type="image/png">
  <link rel="apple-touch-icon" href="/xrbc-nft.png">
  <meta name="msapplication-TileImage" content="/xrbc-nft.png">

  <!-- Open Graph -->
  <meta property="og:title" content="XRBitcoinCash · XRBC on XRPL">
  <meta property="og:description" content="Trade XRBC on the XRP Ledger. Connect your wallet and explore XRBC/XRP DEX + AMM.">
  <meta property="og:image" content="/xrbc-nft.png">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://xrbitcoincash.com/">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="XRBitcoinCash · XRBC on XRPL">
  <meta name="twitter:description" content="Decentralized XRBC/XRP trading on the XRP Ledger.">
  <meta name="twitter:image" content="/xrbc-nft.png">

  <style>
    /* === Dark Theme Variables === */
    :root {
      --bg: #0b0f14;
      --panel: #121821;
      --panel-2: #141b25;
      --text: #e7edf5;
      --muted: #9fb0c5;
      --accent: #60a5fa;
      --accent-2: #22d3ee;
      --warn: #f59e0b;
      --err: #ef4444;
      --ok: #22c55e;
      --border: #1f2937;
      --ring: #1d4ed8;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    html, body {
      height: 100%;
      background: var(--bg);
      color: var(--text);
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      overflow-x: hidden;
    }

    .container { max-width: 900px; margin:0 auto; padding:20px 16px; }
    .card {
      background: linear-gradient(180deg, var(--panel), var(--panel-2));
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
    }
    .card.glow { border-color: var(--accent-2); box-shadow: 0 0 20px rgba(34,211,238,.3); }

    .btn {
      border: 1px solid var(--border);
      background: linear-gradient(180deg, #0e1520, #0c131c);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: transform .06s ease, border-color .2s ease;
      min-width: 120px; text-align:center;
    }
    .btn:hover { transform: translateY(-1px); border-color:#2a3a51; }
    .btn:active { transform: translateY(0); }
    .btn[disabled] { opacity:.6; cursor:not-allowed; }
    .btn-primary {
      background: linear-gradient(180deg, rgba(37,99,235,.25), rgba(37,99,235,.15));
      border-color: rgba(37,99,235,.45);
    }
    .btn-secondary {
      background: linear-gradient(180deg, rgba(34,211,238,.22), rgba(34,211,238,.12));
      border-color: rgba(34,211,238,.45);
    }

    .status-text { font-size:13px; color:var(--muted); margin-top:8px; }
    .status-text.ok { color:var(--ok); }
    .status-text.err { color:var(--err); }

    .brand { text-align:center; margin:20px 0; }
    .brand img { max-height: 60px; }
    .brand h1 { margin-top:12px; }
    .brand .btn { margin-top:12px; }

    pre {
      background: #0c131c; border:1px solid #1c2736; border-radius:10px;
      padding:8px; max-height:200px; overflow:auto; font-size:12px; color:#a3e4ff;
      text-align:left;
    }

    .table { width:100%; border-collapse:collapse; font-size:14px; }
    .table th, .table td { padding:8px 10px; border-bottom:1px solid #1a2433; }
    .table thead th { background:#0f1722; color:#cfe2ff; }

    /* Trade UI */
    .trade-card { display:grid; gap:12px; text-align:left; }
    .tabset { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
    .tab { padding:10px 12px; border:1px solid var(--border);
           background:linear-gradient(180deg,#0e1520,#0c131c);
           border-radius:10px; font-weight:700; cursor:pointer; text-align:center; }
    .tab.buy { color:#22c55e; }
    .tab.sell { color:#ef4444; }
    .tab.buy.active { border-color:rgba(34,197,94,.5); }
    .tab.sell.active { border-color:rgba(239,68,68,.5); }
    .field { display:grid; gap:6px; }
    .field label { font-size:13px; color:var(--muted); }
    .field input {
      width:100%; padding:10px 12px; border-radius:10px;
      border:1px solid var(--border); background:#0c131c; color:var(--text);
    }
    .amount-row { display:flex; align-items:center; gap:6px; }
    .inline-hint { font-size:12px; color:var(--muted); }
    .total-line { display:flex; justify-content:space-between;
      padding:10px 12px; border:1px dashed var(--border); border-radius:10px; }
    .button-row { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    @media (max-width:600px){ .button-row{ grid-template-columns:1fr; } }
  </style>
</head>
<body>

<header class="brand">
  <img src="/xrbc-nft.png" alt="XRBC logo">
  <h1>XRBitcoinCash</h1>
  <a href="https://xrbitcoincash.com/" class="btn btn-secondary">Home</a>
</header>

<div class="container">
  <h1>XRBitcoinCash · XRBC/XRP Portal</h1>

  <!-- Wallet -->
  <div class="card glow">
    <h2>Wallet</h2>
    <div style="display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin:16px 0;">
      <button id="connectWalletBtn" class="btn btn-primary">Connect Wallet</button>
      <button id="disconnectWalletBtn" class="btn btn-secondary" disabled>Disconnect</button>
    </div>
    <p id="walletStatus" class="status-text">Status: Not connected</p>
    <button id="setTrustlineBtn" class="btn btn-primary">Set XRBC Trustline</button>
    <div id="trustlineMsg" class="status-text">—</div>
  </div>

  <!-- Ledger Info -->
  <div class="card">
    <h2>Ledger Info</h2>
    <button id="fetchLedgerBtn" class="btn">Fetch Ledger Info</button>
    <pre id="ledgerOutput">—</pre>
  </div>

  <!-- Simple Swap -->
  <div class="card">
    <h2>Simple Swap (AMM)</h2>
    <div class="field">
      <label for="swapAmount">Amount (XRBC)</label>
      <input id="swapAmount" type="number" step="0.000001" placeholder="0.000000">
    </div>
    <p id="swapPreview" class="status-text">—</p>
    <button id="swapBtn" class="btn btn-primary">Swap XRBC ↔ XRP</button>
    <p id="swapMsg" class="status-text">—</p>
  </div>

  <!-- Advanced Trading -->
  <div class="card">
    <h2>Advanced Trading</h2>
    <div class="trade-card" id="tradeCard">
      <div class="tabset">
        <button id="buyTab" class="tab buy active">Buy XRBC</button>
        <button id="sellTab" class="tab sell">Sell XRBC</button>
      </div>

      <div class="field">
        <label>Amount (XRBC)</label>
        <div class="amount-row">
          <img src="/xrbc-nft.png" alt="XRBC logo" style="max-height:22px;">
          <input id="amount" type="number" step="0.000001" placeholder="0.000000">
        </div>
        <div class="inline-hint">How many XRBC to <span id="actionWord">collect</span>.</div>
      </div>

      <div class="field" id="priceField">
        <label>Price (XRP per XRBC)</label>
        <div style="display:flex;gap:8px;">
          <input id="price" type="number" step="0.000001" placeholder="0.500000">
          <button id="suggestPriceBtn" class="btn btn-secondary">Best Price</button>
        </div>
      </div>

      <div class="total-line">
        <span>Total</span><strong id="totalXrp">0.000000 XRP</strong>
      </div>

      <div class="button-row">
        <button id="placeOfferBtn" class="btn btn-primary">Place Limit Order</button>
        <button id="marketOrderBtn" class="btn btn-secondary">Market Order</button>
      </div>
      <p id="tradeMsg" class="status-text">—</p>
      <select id="side" style="display:none">
        <option value="buy" selected>Buy</option>
        <option value="sell">Sell</option>
      </select>
    </div>
  </div>

  <!-- Order Book -->
  <div class="card">
    <h2>XRBC/XRP Order Book</h2>
    <button id="fetchPriceBtn" class="btn">Get Order Book</button>
    <p id="priceOutput">—</p>
  </div>

  <!-- AMM Pool -->
  <div class="card">
    <h2>XRBC/XRP AMM Pool</h2>
    <div id="ammPoolOutput">—</div>
  </div>
</div>

<!-- Config -->
<script type="application/json" id="app-config">
{
  "xummApiKey": "2abde023-0df1-49a2-a4dc-86d776f6318d",
  "proxyUrl": "https://xrbitcoincash-github-io.onrender.com"
}
</script>

<!-- Libraries -->
<script src="https://xaman.app/assets/cdn/xumm.min.js"></script>
<script src="/xrbc-app.js"></script>
</body>
</html>
